<p-card [styleClass]="'overflow-hidden h-full'">
  <p-table
    [value]="dataStore.meters()"
    selectionMode="single"
    (onRowSelect)="onRowSelect($event)"
    class="h-full"
    [scrollable]="true"
    scrollHeight="flex"
  >
    <ng-template pTemplate="caption">
      <div class="flex items-center justify-between">
        Meters
        <p-button icon="i-[mdi--plus]" [rounded]="true" (onClick)="showNewDialog()" />
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th style="max-width: 25%">Type</th>
        <th style="max-width: 40%">Number</th>
        <th style="max-width: 25%">Location</th>
        <th style="width: 10%"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-meter>
      <tr [pSelectableRow]="meter">
        <td>
          <span
            class="{{
              meter.type === 0
                ? 'i-[mdi--lightning-bolt]'
                : meter.type === 1
                  ? 'i-[mdi--water]'
                  : 'i-[mdi--gas-cylinder]'
            }}"
          ></span>
        </td>
        <td>
          <span>{{ meter.meterNumber }}</span>
        </td>
        <td>
          <span>{{ meter.location }}</span>
        </td>
        <td>
          <p-button
            icon="i-[mdi--pencil]"
            [rounded]="true"
            (onClick)="showEditDialog(meter)"
          ></p-button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3">No meters found.</td>
      </tr>
    </ng-template>
  </p-table>
</p-card>

<app-meter-dialog></app-meter-dialog>
