<div class="h-full flex flex-col text-center gap-3">
  <p-card [styleClass]="'overflow-hidden h-full'">
    <p-table
      [value]="dataStore.readings()"
      selectionMode="single"
      [scrollable]="true"
      scrollHeight="flex"
      class="h-full"
    >
      <ng-template pTemplate="caption">
        <div class="flex items-center justify-between">
          <p-button
            (onClick)="navigateBack()"
            icon="i-[mdi--arrow-left]"
            class="mr-4"
            [rounded]="true"
          ></p-button>
          Readings
          <p-button icon="i-[mdi--plus]" [rounded]="true" (onClick)="showDialog()" />
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th>Number</th>
          <th>ReadingDate</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-reading>
        <tr [pSelectableRow]="reading">
          <td>
            <span>{{ reading.number }}</span>
          </td>
          <td>
            <span>{{ reading.readingDate | date: 'dd.MM.yyyy' }}</span>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="2">No readings found.</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>

  <p-button
    label="Delete Meter"
    severity="danger"
    [text]="true"
    class="text-center"
    (onClick)="confirmDeleteMeter($event)"
  />
</div>

<app-reading-dialog [meterId]="meterId()"></app-reading-dialog>
